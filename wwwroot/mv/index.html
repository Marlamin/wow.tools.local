
<!DOCTYPE html>
<html data-bs-theme="dark">
<head>
    <title>WoW.tools - Modelviewer</title>
    <meta property='og:type' content='website'>
    <meta property='og:site_name' content='WoW.tools'>
    <meta property='og:title' content='WoW.tools'>
    <meta property='og:image' content='/img/cogw.png'>
    <meta property='twitter:image' content='/img/cogw.png'>
    <meta property='twitter:card' content='summary'>
    <meta property='twitter:site' content='@Marlamin'>
    <meta name='application-name' content='WoW.tools'>
    <meta name='apple-mobile-web-app-title' content='WoW.tools'>
    <meta name='theme-color' content='#343a40'>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <link rel="icon" type="image/png" href="/img/cogw.png" />

    <!-- Font Awesome -->
    <link rel="stylesheet" href="/css/font-awesome.min.css" />

    <!-- JQuery -->
    <script src="/js/jquery.min.js"></script>

    <!-- Bootstrap -->
    <link rel="stylesheet" href="/css/bootstrap.min.css">
    <script src="/js/bootstrap.bundle.min.js"></script>

    <!-- Datatables -->
    <link rel="stylesheet" type="text/css" href="/css/datatables.min.css" />
    <script type="text/javascript" src="/js/datatables.min.js"></script>
    <script src="/js/input.js" crossorigin="anonymous"></script>

    <link href="/css/style.css?v=1661289414" rel="stylesheet">
    <script type="text/javascript" src="/js/main.js?v=1645063884"></script>
    <script type="text/javascript" src="/js/anims.js?v=1658923290"></script>
</head>
<body>
    <nav class="navbar navbar-expand-lg" id="navbar"></nav>
    <link href="/css/modelviewer.css?v=1630254490" rel="stylesheet">
    <script src="/js/hammer.min.js" crossorigin="anonymous"></script>
    <script type='text/javascript'>
        (function (f, e) { "object" === typeof exports && "undefined" !== typeof module ? module.exports = e() : "function" === typeof define && define.amd ? define(e) : f.Stats = e() })(this, function () {
            var f = function () {
                function e(a) { c.appendChild(a.dom); return a } function u(a) { for (var d = 0; d < c.children.length; d++)c.children[d].style.display = d === a ? "block" : "none"; l = a } var l = 0, c = document.createElement("div"); c.style.cssText = "cursor:pointer;opacity:0.9;z-index:10000"; c.addEventListener("click", function (a) {
                    a.preventDefault();
                    u(++l % c.children.length)
                }, !1); var k = (performance || Date).now(), g = k, a = 0, r = e(new f.Panel("FPS", "#0ff", "#002")), h = e(new f.Panel("MS", "#0f0", "#020")); if (self.performance && self.performance.memory) var t = e(new f.Panel("MB", "#f08", "#201")); u(0); return {
                    REVISION: 16, dom: c, addPanel: e, showPanel: u, begin: function () { k = (performance || Date).now() }, end: function () {
                        a++; var c = (performance || Date).now(); h.update(c - k, 200); if (c >= g + 1E3 && (r.update(1E3 * a / (c - g), 100), g = c, a = 0, t)) {
                            var d = performance.memory; t.update(d.usedJSHeapSize /
                                1048576, d.jsHeapSizeLimit / 1048576)
                        } return c
                    }, update: function () { k = this.end() }, domElement: c, setMode: u
                }
            }; f.Panel = function (e, f, l) {
                var c = Infinity, k = 0, g = Math.round, a = g(window.devicePixelRatio || 1), r = 80 * a, h = 48 * a, t = 3 * a, v = 2 * a, d = 3 * a, m = 15 * a, n = 74 * a, p = 30 * a, q = document.createElement("canvas"); q.width = r; q.height = h; q.style.cssText = "width:80px;height:48px"; var b = q.getContext("2d"); b.font = "bold " + 9 * a + "px Helvetica,Arial,sans-serif"; b.textBaseline = "top"; b.fillStyle = l; b.fillRect(0, 0, r, h); b.fillStyle = f; b.fillText(e, t, v);
                b.fillRect(d, m, n, p); b.fillStyle = l; b.globalAlpha = .9; b.fillRect(d, m, n, p); return { dom: q, update: function (h, w) { c = Math.min(c, h); k = Math.max(k, h); b.fillStyle = l; b.globalAlpha = 1; b.fillRect(0, 0, r, m); b.fillStyle = f; b.fillText(g(h) + " " + e + " (" + g(c) + "-" + g(k) + ")", t, v); b.drawImage(q, d + a, m, n - a, p, d, m, n - a, p); b.fillRect(d + n - a, m, a, p); b.fillStyle = l; b.globalAlpha = .9; b.fillRect(d + n - a, m, a, g((1 - h / w) * p)) } }
            }; return f
        });
    </script>
    <button id="js-sidebar-button" class="hamburger">
        <i class='fa fa-reorder'></i>
    </button>
    <div id="js-sidebar" class="overlay sidebar closed container">
        <div class="container-fluid">

            <b style='margin-left: 75px; margin-top: 0px;'>Uses modelviewer by Deamon (<i class='fa fa-link'></i> <a href='https://github.com/Deamon87/WebWowViewerCpp/tree/development' target='_BLANK'>GitHub</a>)</b><br>
            <div class='row justify-content-md-center'>
                <div class='col-md-11'>
                    <div class="btn-group" role="group">
                        <button style='margin-left: 48px;' class='btn btn-mv btn-sm' data-bs-toggle='modal' data-bs-target='#settingsModal'><i class='fa fa-gear'></i> Settings</button>
                        <button class='btn btn-mv btn-sm' data-bs-toggle='modal' data-bs-target='#helpModal'><i class='fa fa-info-circle'></i> Help/About</button>
                        <button class='btn btn-mv btn-sm' onclick='exportScene()' id='exportButton' data-bs-toggle="tooltip" data-bs-placement="left" title="Exports the current model/animation to glTF"><i class='fa fa-download' disabled></i> Export glTF</button>
                    </div>
                </div>
            </div>

            <div class='row'>
                <div class='col-md-2' style='padding-right: 0px'>
                    <!--<label title='terrain files (makes search slower)' for='showADT'><input class='filterBox' type='checkbox' id='showADT'> ADT</label><br>-->
                    <label title='larger models (buildings, cities, dungeons, raids etc)' for='showWMO'><input class='filterBox' type='checkbox' id='showWMO' CHECKED> WMO</label><br>
                    <label title='smaller more complex models (creatures, foliage, props etc)' for='showM2'><input class='filterBox' type='checkbox' id='showM2' CHECKED> M2</label><br>
                </div>
                <div class='col-md-8'>
                    <div id='mvfiles_filter' class='dataTables_filter'>
                        <label>
                            <input type="search" id="mvfiles_search" class="form-control form-control-sm" placeholder="Search" aria-controls="mvfiles">
                        </label>
                    </div>
                </div>
            </div>
            <div class='row'>
                <div class='col-md-12'>
                    <table id='mvfiles' class="table table-striped table-hover table-condensed" cellspacing="0" width="100%">
                        <thead>
                            <tr>
                                <th style='width: 50px;'>ID</th>
                                <th>Filename</th>
                            </tr>
                        </thead>
                    </table>
                </div>
            </div>
        </div>

    </div>
    <div id="js-model-control" class="overlay model-control closed">
        <div class='row justify-content-md-center'>
            <div class='col-md-11'>
                <ul class="nav nav-pills nav-fill">
                        <a class="nav-link active" href="#textures" data-bs-toggle="tab" role="tab">Textures</a>
                    <li class="nav-item">
                        <a class="nav-link" href="#geosets" data-bs-toggle="tab" role="tab" id="mapViewerButton">Geosets</a>
                    </li>
                    <li class="nav-item" id="screenshotsTabItem">
                        <a class="nav-link" href="#screenshots" data-bs-toggle="tab" role="tab"><i class='fa fa-camera'></i></a>
                    </li>
                </ul>
                <div class="tab-content">
                    
                    <div class="tab-pane fade show active" id="textures" role="tabpanel" aria-labelledby="textures-tab">
                        <p>Changing the skin/displayID will reset these values. Changing values in this form will let you assign FileDataIDs of your choosing to a certain texture slot.</p>
                        <form id='textureForm'></form>
                        <button type="button" class="btn btn-primary" onclick="updateTextures();">Save</button>
                    </div>
                    <div class="tab-pane fade" id="geosets" role="tabpanel" aria-labelledby="geosets-tab">

                    </div>
                    <div class="tab-pane fade" id="screenshots" role="tabpanel" aria-labelledby="screenshots-tab">
                        <p><strong>Experimental:</strong> Take screenshots covering multiple texture and/or geoset combos.</p>
                        <form id='sscTextureForm'><strong>Texture Slots:</strong></form>
                        <form id='sscGeosetForm'><strong>Geosets:</strong></form>
                        <button id='sscFormButton' type="button" class="btn btn-primary" onclick="screenShotCombos();" data-dismiss="modal">Take Screenshot Combos</button><p>Enter comma-separated texture IDs and/or geoset #s in relevant fields. Include proper values for slots with single values or they'll be set to zero.</p><p>This form is pre-filled with all known variants for this model but it may need adjusting, especially zero geosets.</p><p>Be patient and don't change tabs: the screenshot process has to be slow or it bugs out.</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div id="js-controls" class="overlay controls">
        <div>
            <button id="modelControlButton" class="btn btn-primary btn-sm"><i class='fa fa-cube'></i> Model control (WIP)</button>
            <select id='animationSelect' class='form-control' style='display: none'>
                <option>No options for model</option>
            </select>
            <select id='skinSelect' class='form-control' style='display: none'>
                <option>No options for model</option>
            </select>
        </div>
    </div>
    <div id='errors'></div>
    <div id='fpsLabel'></div>
    <div id='eventLabel'></div>
    <div id='downloadLabel'></div>
    <canvas id="wowcanvas"></canvas>
    <div class="modal" id="settingsModal" tabindex="-1" role="dialog" aria-labelledby="settingsModalLabel" aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="settingsModalLabel">Settings</h5>
                </div>
                <div class="modal-body">
                    <form id='settingsForm'>
                        <input type='checkbox' id='showFPS' name='settings[showFPS]'> <label for='showFPS'>Show stats</label><br>
                        <input type='color' id='customClearColor' name='settings[customClearColor]'> <label for='customClearColor'>Background color (applied on next model load)</label><br>
                        <input type='text' id='farClip' name='settings[farClip]'> <label for='farClip'>View distance</label><br>
                        <input type='text' id='farClipCull' name='settings[farClipCull]'> <label for='farClipCull'>Model culling distance</label><br>
                        <input type='checkbox' id='portalCulling' name='settings[portalCulling]'> <label for='portalCulling'>Enable portal culling?</label><br>
                        <input type='checkbox' id='newDisplayInfo' name='settings[newDisplayInfo]'> <label for='newDisplayInfo'>(WIP) Use new DisplayID based skin selection?</label>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                    <button type="button" class="btn btn-primary" onclick="saveSettings();" data-bs-dismiss="modal">Save</button>
                </div>
            </div>
        </div>
    </div>
    <div class="modal" id="helpModal" tabindex="-1" role="dialog" aria-labelledby="helpModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="helpModalLabel">Help/About</h5>
                </div>
                <div class="modal-body">
                    <p>
                        This tool is being developed by the WoW community for the WoW community and as such won't have watermarks all over it but will likely also be more unstable/bleeding edge. Currently it supports rendering most M2 models (characters unsupported).
                        <br>These parts of it are open source:
                        <ul>
                            <li><a target='_BLANK' href='https://github.com/Deamon87/WebWowViewerCpp/tree/development'>Model viewer itself</a></li>
                            <li><a target='_BLANK' href='https://github.com/Marlamin/DBCDumpHost'>DBC backend (used for texture lookups)</a></li>
                            <li><a target='_BLANK' href='https://github.com/Marlamin/CASCToolHost'>CASC backend (serves files)</a></li>
                        </ul>
                    </p>
                    <h5>Requirements</h5>
                    <p>
                        This requires a browser that supports both WebAssembly (<a href='https://caniuse.com/#search=wasm' target='_BLANK'>see list here</a>) and WebGL 2.0 (<a href='https://caniuse.com/#search=webgl2' target='_BLANK'>see list here</a>). If your browser does not support this the modelviewer will definitely get upset and will definitely throw errors towards your general direction. We're aware this is not always supported on some configurations, but are hopeful it will be in the future!
                    </p>
                    <h5>Controls</h5>
                    <p>
                        <kbd>SHIFT-Z</kbd> hides the UI.<br>
                        <kbd>Spacebar</kbd> pauses the current model (entirely, including rotation and stuff).<br><br>
                        For ADTs and WMOs, the model viewer uses a free-roam camera. It can be controlled via dragging the mouse and <kbd>WASD</kbd> keys. Holding <kbd>SHIFT</kbd> increases camera speed. Pressing <kbd>O</kbd> (the letter O, not zero) returns the camera to position 0 0 0.<br><br>
                        For M2s, the model viewer uses a rotational camera. You can rotate the model by dragging the mouse and zoom out with the scroll wheel. If skins/animations are available, a menu will pop up with options for these.
                    </p>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>
    <script type="text/javascript">
        window.emscriptenBuildTime = "1665263793";
        const embeddedMode = false;
    </script>
    <script src="/js/modelviewer.js?v=1665608575"></script>
    <script src="/mv/project.js?v=1665263793"></script>
</body>
</html>